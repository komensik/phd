"0","#| eval: false"
"0","#| include: false"
"0",""
"0","# 1. create logical variable (true/false) that marks whether respondent answered Q9 with 4"
"0","attn_check_q9 <- raw_data_cleaned$q9 == 4"
"0",""
"0","#2. attention flag - tae text responses to Q17, remove leading/trailing spaces, and convert everything to lowercase for standardization)"
"0","attn_text <- tolower(str_trim(raw_data_cleaned$q17))"
"0",""
"0","#2a. create list of acceptable answers for Q17"
"0","accepted_variants <- c(""purple"", ""\""purple\"""", ""purpke"", ""purplee"", ""prurprle"", ""purpl"", ""purp"", ""ðŸ’œ"", ""ðŸŸ£"")"
"0",""
"0","#2b. chheck if each cleaned Q17 response is in thhe list of accepted variants. if yes, respondent passed attn check"
"0","attn_check_q17 <- attn_text %in% accepted_variants"
"0",""
"0","#3. attn flag -- Create a flag for whether the respondent answered Q114_4 with a 6 (i.e., passed the third attention check"
"0","attn_check_q1114 <- raw_data_cleaned$q114_4 == 6"
"0",""
"0","#If Q114_4 equals -99 (an invalid code), treat that as a failed check."
"0","attn_check_q1114[raw_data_cleaned$q114_4 == -99] <- FALSE"
"0",""
"0","#If Q114_4 is NA (they didnâ€™t see the question), count that as a pass because they werenâ€™t shown the question"
"0","attn_check_q1114[is.na(raw_data_cleaned$q114_4)] <- TRUE  # not shown â†’ pass"
"0",""
"0","# 2. Create score + filter full failures"
"0","raw_data_cleaned <- raw_data_cleaned %>%"
"0","  mutate("
"0","    attn_q9_pass = attn_check_q9,"
"0","    attn_q17_pass = attn_check_q17,"
"0","    attn_q1114_pass = attn_check_q1114,"
"0","    attn_pass_count = as.integer(attn_q9_pass) + as.integer(attn_q17_pass) + as.integer(attn_q1114_pass)"
"0","  ) %>%"
"0","  filter(attn_pass_count > 0)  # Remove only people who failed all"
"0",""
"0",""
"0",""

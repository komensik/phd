"0","#| eval: false"
"0","#| include: false"
"0","generate_q4_base_codebook <- function(raw_data) {"
"0","  q4_binary_cols <- names(raw_data)[str_detect(names(raw_data), ""^Q4_\\d+_\\d+$"")]"
"0",""
"0","  tibble(variable_name = q4_binary_cols) %>%"
"0","    mutate("
"0","      statement_number = str_extract(variable_name, ""(?<=Q4_)\\d+(?=_)""),"
"0","      response_option_code = str_extract(variable_name, ""(?<=_)\\d+$""),"
"0","      response_option = case_when("
"0","        response_option_code == ""1"" ~ ""You"","
"0","        response_option_code == ""2"" ~ ""Someone you know well"","
"0","        response_option_code == ""3"" ~ ""No/Don't know"","
"0","        TRUE ~ NA_character_"
"0","      ),"
"0","      type = ""Binary (0/1)"","
"0","      values = ""1 = selected, 0 = not selected, NA = no response"","
"0","      notes = ""From Q4 matrix question (multiple selection possible)"""
"0","    )"
"0","}"
"0",""

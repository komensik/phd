"0","library(sandwich)"
"2","Warning: package ‘sandwich’ was built under R version 4.3.3"
"0","# adjust SEs"
"0","N <- nrow(m1$model)"
"0","K <- summary(m1)$df[1]"
"0","X <- cbind(rep(1, N), m1$model[,-1])"
"0","colnames(X)[1] <- ""Intercept"""
"0","X <- as.matrix(X)"
"0",""
"0","# default standard error"
"0","se_default <- sqrt(diag((sum(m1$residuals^2) / m1$df.residual) * (solve(t(X) %*% X))))"
"0",""
"0","# robust standard error (plug squared residuals in)"
"0","se_robust <- sqrt(diag( "
"0","                      solve(t(X) %*% X) %*% t(X) %*%"
"0","                      diag(m1$residuals^2) %*% "
"0","                      X %*% solve(t(X) %*% X)"
"0","                      )"
"0",")"
"0",""
"0","# print"
"0","round(data.frame(coefficient = coef(m1), "
"0","           se.default = se_default, "
"0","           se.robust = se_robust,"
"0","           se.robust.sandwich = sqrt(diag(sandwich::vcovHC(m1, type = ""HC0"")))), "
"0","      5)"
